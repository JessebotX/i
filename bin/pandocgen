#!/bin/sh
#
# pandocgen - recursively traverse directories and convert any markdown
# files into html with pandoc
#
# DEPENDENCIES
# - pandoc
# - find

defaultifs=${IFS}

main() {
	# Usage: main "$@"
	# Program's entry point

	IFS=$(printf '\n\b')

	# This is fine because IFS is set properly
	# shellcheck disable=SC2044
	for i in $(find "${1:-.}" -name "*.md"); do
		pandoc -f markdown -t html \
			--template="tpl/template.html" \
			"${i}" -o "${i%.md}.html"
	done

	IFS=${defaultifs}
}

main "$@"
